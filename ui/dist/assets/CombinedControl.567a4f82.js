import{o as i,c,a as o,t as d,i as a,v as h,n as w,r as u,j as _,k as S}from"./vendor.48d55495.js";import{_ as y}from"./index.1b01894e.js";import v from"./Graph.079d88e4.js";var g="/assets/car.3645a4ed.png";const k={props:{width:{type:Number,default:300},rotation:{type:Number,default:0}},data(){return{rSpeed:127,lSpeed:127}},methods:{displaySpeed(t){const r=t-127;return r>=0?`${Math.round(r/128*100)}%`:`${Math.round(r/127*100)}%`},update(){fetch("/rover/speed",{method:"POST",body:JSON.stringify({speedL:Number(this.lSpeed),speedR:Number(this.rSpeed)})})}},watch:{lSpeed(){this.lSpeed=Math.max(Math.min(this.lSpeed,255),0),this.update()},rSpeed(){this.rSpeed=Math.max(Math.min(this.rSpeed,255),0),this.update()}},mounted(){window.addEventListener("keydown",t=>{t.key=="ArrowUp"&&(this.rSpeed!=this.lSpeed&&(this.rSpeed=this.lSpeed=Math.round(Math.abs((this.rSpeed+this.lSpeed)/2))),this.rSpeed++,this.lSpeed++),t.key=="ArrowDown"&&(this.rSpeed!=this.lSpeed&&(this.rSpeed=this.lSpeed=Math.round(Math.abs((this.rSpeed+this.lSpeed)/2))),this.rSpeed--,this.lSpeed--),t.key=="ArrowRight"&&(this.rSpeed--,this.lSpeed++),t.key=="ArrowLeft"&&(this.rSpeed++,this.lSpeed--),t.key==" "&&(this.lSpeed=this.rSpeed=127)})}},x={class:"top"},C={class:"control"},M={class:"range"},b={class:"range"};function U(t,r,n,m,e,p){return i(),c("div",x,[o("div",C,[o("div",M,[o("p",null,d(p.displaySpeed(e.lSpeed))+" ("+d(e.lSpeed)+") ",1),a(o("input",{type:"range","onUpdate:modelValue":r[0]||(r[0]=s=>e.lSpeed=s),min:"0",max:"255"},null,512),[[h,e.lSpeed]])]),o("img",{class:"car",src:g,style:w({width:`${n.width}px`,transform:"rotate("+n.rotation+"deg)"})},null,4),o("div",b,[o("p",null,d(p.displaySpeed(e.rSpeed))+" ("+d(e.rSpeed)+") ",1),a(o("input",{type:"range","onUpdate:modelValue":r[1]||(r[1]=s=>e.rSpeed=s),min:"0",max:"255"},null,512),[[h,e.rSpeed]])])])])}var N=y(k,[["render",U],["__scopeId","data-v-735a00a8"]]);const O={components:{Control:N,Graph:v},data(){return{showUnderlay:!0,showOverlay:!0,controlWidth:50,rotation:0}},mounted(){window.addEventListener("keydown",t=>{!t.altKey||(t.key=="1"&&(this.showUnderlay=!0,this.showOverlay=!0),t.key=="2"&&(this.showUnderlay=!1,this.showOverlay=!0),t.key=="3"&&(this.showUnderlay=!0,this.showOverlay=!1))})}},A={class:"wrap"},B={class:"overlay"},L={class:"underlay"};function V(t,r,n,m,e,p){const s=u("control"),f=u("graph");return i(),c("div",A,[o("div",B,[e.showOverlay?(i(),_(s,{key:0,width:e.controlWidth,rotation:e.rotation},null,8,["width","rotation"])):S("",!0)]),o("div",L,[e.showUnderlay?(i(),_(f,{key:0,onChangeControlWidth:r[0]||(r[0]=l=>e.controlWidth=l),onChangeControlRotation:r[1]||(r[1]=l=>e.rotation=l)})):S("",!0)])])}var R=y(O,[["render",V],["__scopeId","data-v-f4e7d6c4"]]);export{R as default};
